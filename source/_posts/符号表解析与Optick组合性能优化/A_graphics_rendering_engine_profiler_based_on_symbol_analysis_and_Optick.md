# 基于符号表解析与 Optick 二次开发的图形渲染引擎性能检测工具

## 摘要

在已上线的3D游戏项目中，图形渲染引擎的性能分析与优化为一大痛点。传统性能检测使用外部通用工具与内嵌分析代码，对此均具有局限性，使优化工作较为复杂。

外部通用工具如 Intel VTune，提供包括线程采样与硬件事件采样在内的强大性能分析功能，能够快速定位性能问题。但在获取图形渲染引擎与项目内部部分私有数据这一特定场景中，无法提供支持。同时，VTune仅提供少量接口供外部程序使用，无法做到与项目相关支持平台联动等深度定制开发。

内嵌分析代码基于操作系统计时与操作系统接口，通过时间戳差值与操作系统提供的信息，进行项目性能数据的采集。代码均为开发人员插入，具有较大的灵活性。与开发环境不同，在大型上线项目的生产环境中，需要对原有代码进行插入修改，降低原有代码的完整性与可维护性。

基于上述传统性能检测存在的问题，本文将对两个方向进行研究，并做出改良。
对于外部通用工具存在的局限性，本文采用开源软件Optick进行补充。Optick是一款用于游戏的超轻量级C++性能分析器，提供计时采样、项目数据标签定制等功能。其开源特性可以较好地支持软件代码结合至现有项目中，提供私有数据分析与深度定制功能。
对于内嵌分析代码的缺陷，本文采用动态二进制插桩的形式进行弥补。将原先需要嵌入生产环境中的代码，改为程序运行时动态注入的形式。在保持灵活性与深度采集数据的同时，减少对原有代码的破坏。

对于上述两个方向，本文研发了一种基于符号表解析后动态插桩的二进制注入技术，基于开源软件 Optick 进行二次开发显示性能数据，完成了一款图形渲染引擎性能检测工具。

研究成果已在金山软件旗下子公司，西山居游戏，上线项目之一《剑侠情缘网络版叁重制版》中获得应用，并对数十万用户的实际体验进行了较大的改善。
在上述研究成果的支持下，项目对引擎渲染线程和个别性能较差的场景进行针对性分析，改善产品质量。

关键词：性能优化 图形渲染

## A graphics rendering engine profiler based on symbol analysis and Optick

Abstract: 

Keywords:

## 目录
